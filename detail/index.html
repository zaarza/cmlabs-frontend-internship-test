<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        />
        <title>Detail</title>
        <link
            href="../assets/css/output.css"
            rel="stylesheet"
        />
        <link
            rel="preconnect"
            href="https://fonts.googleapis.com"
        />
        <link
            rel="preconnect"
            href="https://fonts.gstatic.com"
            crossorigin
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet"
        />
    </head>
    <body class="font-jost">
        <nav class="flex justify-between px-5 py-3 border-bottom border relative">
            <a
                href="/"
                class="font-medium text-xl text-slate-800"
                >mealapp</a
            >
            <button
                class="w-6 aspect-square md:hidden"
                id="toggle-navbar-button"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M3 4H21V6H3V4ZM3 11H21V13H3V11ZM3 18H21V20H3V18Z"></path>
                </svg>
            </button>
            <ul
                id="navbar-menu"
                class="gap-6 md:w-fit bg-white w-full left-0 top-[-9999px] md:border-none border-t py-8 flex md:flex-row md:static md:py-0 flex-col text-center absolute"
            >
                <li>
                    <a
                        href="/"
                        class="font-light text-slate-800 hover:underline underline-offset-2"
                        >Home</a
                    >
                </li>

                <li>
                    <a
                        href="/"
                        class="font-light text-slate-800 hover:underline underline-offset-2"
                        >Foods</a
                    >
                </li>
                <li>
                    <a
                        href="/"
                        class="font-light text-slate-800 hover:underline underline-offset-2"
                        >Ingredients</a
                    >
                </li>
                <li>
                    <a
                        href="/"
                        class="font-light text-slate-800 hover:underline underline-offset-2"
                        >Local Culinary</a
                    >
                </li>
            </ul>
        </nav>

        <div class="px-5 py-10 lg:px-40 lg:py-10 flex flex-col gap-y-12 max-w-7xl mx-auto">
            <!-- Breadcrumb -->
            <div class="flex gap-x-4 flex-wrap">
                <div class="flex gap-x-2 items-center">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="w-4 aspect-square"
                    >
                        <path
                            d="M20 20C20 20.5523 19.5523 21 19 21H5C4.44772 21 4 20.5523 4 20V11L1 11L11.3273 1.6115C11.7087 1.26475 12.2913 1.26475 12.6727 1.6115L23 11L20 11V20ZM11 13V19H13V13H11Z"
                        ></path>
                    </svg>
                    <a
                        href="/"
                        class="whitespace-nowrap"
                        >Home</a
                    >
                </div>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-6 aspect-square"
                >
                    <path
                        d="M13.1717 12.0007L8.22192 7.05093L9.63614 5.63672L16.0001 12.0007L9.63614 18.3646L8.22192 16.9504L13.1717 12.0007Z"
                    ></path>
                </svg>
                <a
                    href="/"
                    class="whitespace-nowrap"
                    >Category</a
                >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-6 aspect-square"
                >
                    <path
                        d="M13.1717 12.0007L8.22192 7.05093L9.63614 5.63672L16.0001 12.0007L9.63614 18.3646L8.22192 16.9504L13.1717 12.0007Z"
                    ></path>
                </svg>
                <a
                    href="/"
                    id="detail-category-link"
                    class="whitespace-nowrap detail-category"
                ></a>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-6 aspect-square"
                >
                    <path
                        d="M13.1717 12.0007L8.22192 7.05093L9.63614 5.63672L16.0001 12.0007L9.63614 18.3646L8.22192 16.9504L13.1717 12.0007Z"
                    ></path>
                </svg>
                <p class="text-black/50 whitespace-nowrap detail-name"></p>
            </div>
            <!-- End of Breadcrumb -->

            <h1 class="text-5xl detail-name"></h1>
            <hr />

            <div>
                <span class="text-red-400 font-jost font-medium text-lg detail-category"></span>
                <div class="flex flex-col gap-6 mt-4 md:flex-row">
                    <img
                        id="detail-image"
                        class="rounded-2xl aspect-[14/15] h-fit md:w-1/2 bg-contain w-full"
                        src=""
                        alt=""
                    />
                    <div class="w-full flex flex-col gap-y-6 md:w-1/2">
                        <h2 class="text-4xl font-jost">Instructions</h2>
                        <p
                            class="font-jost font-light whitespace-pre-line"
                            id="detail-instruction"
                        ></p>

                        <h2 class="text-4xl font-jost">Recipes</h2>
                        <ul
                            id="detail-ingredients-list"
                            class="list-disc list-inside"
                        ></ul>
                    </div>
                </div>

                <div class="w-full aspect-video mt-16">
                    <h2 class="text-4xl text-center">Tutorials</h2>
                    <iframe
                        id="detail-video"
                        class="mt-6"
                        width="100%"
                        height="100%"
                        src=""
                        title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                    ></iframe>
                </div>
            </div>
        </div>
        <script
            src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
            integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="/assets/js/navbar.js"></script>
        <script>
            $(document).ready(() => {
                const urlParams = new URLSearchParams(window.location.search);
                const idParams = urlParams.get('id');

                if (!idParams) {
                    window.location.replace('/');
                }

                axios
                    .get(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${idParams}`)
                    .then((response) => {
                        const data = response.data.meals[0];

                        document.title = data.strMeal;
                        $('.detail-name').text(data.strMeal);
                        $('#detail-image').attr('src', data.strMealThumb);
                        $('#detail-category-link').attr('href', `/category/index.html?name=${data.strCategory}`);
                        $('#detail-instruction').text(data.strInstructions);
                        $('.detail-category').text(data.strCategory);
                        $('#detail-video').attr('src', `https://www.youtube.com/embed/${data.strYoutube.slice(32)}`);

                        for (let i = 1; i <= 20; i++) {
                            console.log(i);
                            if (eval('data.strIngredient' + i).length > 0) {
                                $('#detail-ingredients-list').append(`
                                    <li>${eval('data.strIngredient' + i)} ${eval('data.strMeasure1' + i) || ''}</li> 
                                `);
                            }
                        }
                    })
                    .catch((error) => {
                        console.log(error);
                    });
            });
        </script>
    </body>
</html>
